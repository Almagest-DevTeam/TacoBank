import React from "react";
import { useNavigate, useLocation } from "react-router-dom";
import useAuth from "../hooks/useAuth";

const BottomNav: React.FC = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const { authData } = useAuth();

  // 현재 경로가 버튼 경로와 일치하면 색상 클래스 추가
  const isActive = (path: string) => {
    if (path === "/") {
      return location.pathname === "/" ? "text-[#424242]" : "text-[#BDBDBD]";
    }
  
    if (path === "/settlement") {
      // /settlement/receive 또는 /settlement/send만 활성화
      return ["/settlement/receive", "/settlement/send"].includes(location.pathname)
        ? "text-[#424242]"
        : "text-[#BDBDBD]";
    }
  
    return location.pathname === path ? "text-[#424242]" : "text-[#BDBDBD]";
  };

  return (
    <nav className="absolute bottom-0 left-0 w-full border-t rounded-t-2xl" style={{ height: "72px" }}>
      <div className="flex items-center justify-evenly h-full">
        {/* Friends SVG 버튼 */}
        <button
          onClick={() => navigate("/friends")}
          className={`flex flex-col items-center focus:outline-none ${isActive(
            "/friends"
          )}`}
        >
          <svg
            version="1.0"
            xmlns="http://www.w3.org/2000/svg"
            className="w-8 h-8"
            viewBox="0 0 512.000000 512.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
              fill="currentColor"
              stroke="none"
            >
              <path
                d="M2015 4790 c-372 -59 -682 -283 -848 -615 -38 -77 -79 -196 -99 -290
-16 -78 -16 -333 0 -410 78 -364 294 -643 617 -801 317 -154 675 -151 990 7
295 149 504 415 587 746 32 126 32 379 1 504 -108 428 -435 752 -853 844 -90
19 -311 28 -395 15z"
              />
              <path
                d="M1975 2360 c-752 -77 -1415 -552 -1716 -1230 -92 -208 -113 -307 -90
-421 39 -186 197 -344 380 -379 35 -6 566 -10 1526 -10 l1472 0 -13 52 c-8 29
-14 101 -14 160 l0 108 -108 0 c-173 0 -273 35 -380 134 -200 186 -201 500 -3
689 104 99 210 137 383 137 l108 0 0 103 c0 56 3 118 6 137 6 35 4 36 -84 102
-361 270 -766 410 -1217 422 -88 3 -200 1 -250 -4z"
              />
              <path
                d="M3935 1906 c-37 -17 -70 -52 -84 -89 -7 -17 -11 -127 -11 -282 l0
-254 -269 -3 c-254 -3 -271 -4 -297 -24 -53 -39 -69 -71 -69 -134 0 -63 16
-95 69 -134 26 -20 43 -21 296 -24 l269 -3 3 -269 c3 -253 4 -270 24 -296 39
-53 71 -69 134 -69 63 0 95 16 134 69 20 26 21 43 24 296 l3 269 269 3 c253 3
270 4 296 24 53 39 69 71 69 134 0 63 -16 95 -69 134 -26 20 -43 21 -296 24
l-269 3 -3 269 c-3 253 -4 270 -24 296 -11 15 -32 37 -46 47 -34 25 -113 32
-153 13z"
              />
            </g>
          </svg>
          친구
        </button>
        {/* </button> */}

        {/* Other buttons */}
        <button
          onClick={() => navigate("/groups")}
          className={`flex flex-col items-center focus:outline-none ${isActive(
            "/groups"
          )}`}
        >
          <svg
            version="1.0"
            xmlns="http://www.w3.org/2000/svg"
            className="w-8 h-8"
            viewBox="0 0 512.000000 512.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
              fill="currentColor"
              stroke="none"
            >
              <path
                d="M2425 4789 c-221 -43 -405 -163 -525 -340 -97 -141 -134 -268 -134
-449 -1 -225 75 -410 229 -565 154 -154 340 -230 565 -230 225 0 411 76 565
230 154 154 230 340 230 565 0 174 -36 297 -125 433 -112 173 -271 287 -480
344 -68 18 -258 25 -325 12z"
              />
              <path
                d="M740 4304 c-111 -23 -224 -86 -311 -173 -251 -252 -252 -650 0 -901
253 -252 651 -253 901 -1 253 254 253 648 0 902 -155 156 -374 220 -590 173z"
              />
              <path
                d="M4100 4304 c-111 -23 -224 -86 -311 -173 -251 -252 -252 -650 0 -901
253 -252 651 -253 901 -1 253 254 253 648 0 902 -155 156 -374 220 -590 173z"
              />
              <path
                d="M765 2710 c-123 -20 -264 -75 -362 -141 -70 -47 -178 -154 -229 -226
-56 -78 -118 -210 -146 -310 -21 -73 -22 -104 -26 -516 -2 -293 0 -455 8 -490
38 -184 197 -342 379 -377 30 -6 212 -10 418 -10 324 0 364 2 359 15 -41 107
-41 112 -41 630 0 481 1 504 23 602 44 200 112 359 227 528 36 53 65 100 65
104 0 8 -127 85 -208 126 -115 57 -327 87 -467 65z"
              />
              <path
                d="M2385 2706 c-454 -71 -817 -414 -922 -871 -16 -72 -18 -129 -18 -550
0 -464 0 -471 22 -525 46 -111 142 -207 253 -253 l55 -22 785 0 785 0 55 22
c111 46 207 142 253 253 21 53 22 67 25 475 3 450 -2 526 -44 673 -158 545
-690 885 -1249 798z"
              />
              <path
                d="M4013 2685 c-94 -24 -202 -73 -279 -125 -55 -39 -59 -46 -40 -73 146
-198 230 -378 278 -599 22 -99 23 -121 23 -603 0 -518 0 -523 -41 -630 -5 -13
35 -15 359 -15 206 0 388 4 418 10 183 35 344 196 379 379 6 31 10 227 10 466
0 324 -3 431 -15 500 -49 279 -235 520 -494 637 -177 81 -411 102 -598 53z"
              />
            </g>
          </svg>
          그룹
        </button>
        <button
          onClick={() => navigate("/")}
          className={`flex flex-col items-center focus:outline-none ${isActive(
            "/"
          )}`}
        >
          <svg
            version="1.0"
            xmlns="http://www.w3.org/2000/svg"
            className="w-8 h-8"
            viewBox="0 0 512.000000 512.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
              fill="currentColor"
              stroke="none"
            >
              <path
                d="M2515 5034 c-89 -22 -102 -33 -1282 -1114 -941 -862 -1183 -1089
-1203 -1127 -19 -37 -25 -62 -25 -113 1 -84 23 -126 112 -212 57 -54 80 -70
128 -83 64 -19 126 -15 176 11 17 8 71 51 119 95 49 43 91 79 94 79 3 0 6
-508 6 -1128 0 -1256 -3 -1195 67 -1273 20 -22 55 -50 77 -62 40 -22 50 -22
529 -25 423 -2 496 -1 543 13 67 19 129 73 158 135 21 44 21 57 24 863 l3 817
567 -2 567 -3 5 -830 c6 -926 0 -855 77 -930 67 -65 78 -66 655 -63 577 3 551
0 629 80 73 75 69 4 69 1255 0 618 4 1123 8 1123 5 0 19 -11 32 -25 75 -80
139 -95 227 -53 56 26 171 138 210 206 39 65 40 166 3 231 -19 34 -305 290
-1193 1067 -678 594 -1187 1032 -1212 1044 -44 21 -131 33 -170 24z"
              />
            </g>
          </svg>
          Home
        </button>
        <button
          onClick={() => {
            if (authData?.mydataLinked === "Y") {
              navigate("/settlement");
            } else {
              alert(
                "정산현황을 이용하려면 계좌 연동이 필요합니다. 계좌를 연동해주세요."
              );
            }
          }}
          className={`flex flex-col items-center focus:outline-none ${isActive(
            "/settlement"
          )}`}
        >
          <svg
            version="1.0"
            xmlns="http://www.w3.org/2000/svg"
            className="w-8 h-8"
            viewBox="0 0 512.000000 512.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
              fill="currentColor"
              stroke="none"
            >
              <path
                d="M2370 5114 c-19 -2 -78 -9 -130 -15 -791 -90 -1522 -586 -1924 -1305
-146 -262 -252 -588 -297 -914 -18 -125 -18 -515 0 -640 105 -762 511 -1409
1146 -1826 609 -400 1377 -517 2090 -317 929 260 1646 1043 1819 1987 156 845
-103 1682 -705 2285 -399 398 -879 639 -1449 726 -100 15 -472 28 -550 19z
m400 -305 c889 -81 1656 -692 1935 -1541 232 -710 105 -1474 -345 -2073 -373
-497 -968 -828 -1590 -884 -738 -68 -1467 232 -1941 798 -290 346 -478 795
-518 1241 -121 1318 904 2453 2229 2469 63 0 167 -4 230 -10z"
              />
              <path
                d="M2351 4509 c-442 -50 -853 -246 -1167 -556 -358 -354 -558 -807 -581
-1313 -24 -544 184 -1075 573 -1464 495 -496 1206 -687 1889 -509 333 87 638
264 888 517 754 763 754 1989 0 2752 -298 301 -663 489 -1083 559 -116 19
-405 27 -519 14z m277 -1093 c64 -33 66 -37 158 -364 l15 -52 277 2 276 3 51
165 c56 183 71 211 120 234 100 48 215 -22 215 -129 0 -22 -16 -89 -35 -150
-19 -60 -35 -113 -35 -117 0 -5 26 -8 58 -8 34 0 71 -7 92 -18 107 -53 107
-211 0 -264 -27 -14 -60 -18 -140 -18 l-105 0 -184 -608 c-101 -334 -193 -625
-205 -646 -50 -92 -187 -101 -247 -16 -10 14 -96 302 -190 640 -94 338 -175
619 -180 624 -5 5 -11 7 -14 4 -3 -2 -87 -285 -187 -628 -170 -580 -185 -626
-215 -656 -57 -58 -149 -58 -205 -1 -30 30 -48 84 -219 657 l-186 625 -115 5
c-87 4 -120 9 -141 23 -67 44 -88 143 -44 208 31 47 80 69 150 69 51 0 58 2
53 18 -2 9 -18 62 -35 118 -17 56 -31 118 -31 138 0 98 99 168 193 137 65 -22
88 -61 142 -244 l49 -167 282 0 281 0 48 165 c27 91 57 179 67 195 37 62 124
88 186 56z"
              />
              <path
                d="M1860 2693 c-1 -22 186 -631 191 -625 4 4 45 141 93 304 47 163 89
304 92 313 5 13 -17 15 -185 15 -105 0 -191 -3 -191 -7z"
              />
              <path
                d="M2890 2690 c0 -15 173 -631 176 -627 2 1 155 500 190 620 5 16 -8 17
-180 17 -123 0 -186 -4 -186 -10z"
              />
            </g>
          </svg>
          정산현황
        </button>
        <button
          onClick={() => navigate("/my-info")}
          className={`flex flex-col items-center focus:outline-none ${isActive(
            "/my-info"
          )}`}
        >
          <svg
            version="1.0"
            xmlns="http://www.w3.org/2000/svg"
            className="w-8 h-8"
            viewBox="0 0 512.000000 512.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
              fill="currentColor"
              stroke="none"
            >
              <path
                d="M2389 4681 c-87 -16 -202 -52 -273 -85 -478 -220 -726 -760 -580
-1262 105 -364 391 -642 762 -741 86 -23 116 -26 262 -26 146 0 176 3 262 26
371 99 657 376 762 741 147 506 -112 1059 -595 1267 -147 64 -224 80 -399 84
-85 2 -176 0 -201 -4z"
              />
              <path
                d="M2430 2344 c-802 -59 -1470 -530 -1704 -1202 -65 -188 -105 -480 -76
-566 16 -48 63 -102 111 -127 37 -19 75 -19 1796 -19 1679 0 1760 1 1798 19
49 22 99 77 115 127 16 46 8 209 -15 334 -136 730 -780 1301 -1597 1415 -111
15 -339 25 -428 19z"
              />
            </g>
          </svg>
          마이페이지
        </button>
      </div>
    </nav>
  );
};

export default BottomNav;
